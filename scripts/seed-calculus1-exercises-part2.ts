/**
 * Seed Calculus 1 Exercises - Part 2 (Topics 6-10)
 * Run with: npx tsx scripts/seed-calculus1-exercises-part2.ts
 */

import { Client, Databases, ID } from "node-appwrite";

const client = new Client()
  .setEndpoint("https://fra.cloud.appwrite.io/v1")
  .setProject("6929739f0023a7777f65")
  .setKey(process.env.APPWRITE_API_KEY || "standard_3e263bf7aa3910bdfc73e9c8989d51e3842c46df7401319705c3c043aa6aa1de846eeb6575b9d8b925d8370b4b6c69dee283308a4a0486c17dad29d560746cce8cc36ac221540dbd98b3d133f9118f400a8f9ab8c0cab5b442fe311bbb87e24b7915213d97e826c0a8a2d7b844bef4d28c022b08a4b208682e104c66dc16c9aa");

const databases = new Databases(client);
const DATABASE_ID = "dailymath";
const COURSE_ID = "calculus-1";

interface Exercise {
  id: string;
  topicId: string;
  question: string;
  questionHe: string;
  difficulty: "easy" | "medium" | "hard";
  xpReward: number;
  answer: string;
  answerType: "numeric" | "expression" | "proof" | "open";
  tip: string;
  tipHe: string;
  estimatedMinutes: number;
}

// ============================================
// TOPIC 6: PRODUCT & QUOTIENT RULES (pro-quo)
// ============================================
const PRODUCT_QUOTIENT_EXERCISES: Exercise[] = [
  // Easy (5)
  {
    id: "pro-quo-e-001",
    topicId: "product-quotient",
    question: "Find $\\frac{d}{dx}[x \\cdot e^x]$",
    questionHe: "מצא $\\frac{d}{dx}[x \\cdot e^x]$",
    difficulty: "easy",
    xpReward: 10,
    answer: "eˣ + xeˣ",
    answerType: "expression",
    tip: "Product rule: (fg)' = f'g + fg'",
    tipHe: "כלל המכפלה: (fg)' = f'g + fg'",
    estimatedMinutes: 3,
  },
  {
    id: "pro-quo-e-002",
    topicId: "product-quotient",
    question: "Find $\\frac{d}{dx}[x^2 \\cdot \\sin x]$",
    questionHe: "מצא $\\frac{d}{dx}[x^2 \\cdot \\sin x]$",
    difficulty: "easy",
    xpReward: 10,
    answer: "2x sin x + x² cos x",
    answerType: "expression",
    tip: "Apply product rule with f = x² and g = sin x",
    tipHe: "הפעל כלל המכפלה עם f = x² ו-g = sin x",
    estimatedMinutes: 3,
  },
  {
    id: "pro-quo-e-003",
    topicId: "product-quotient",
    question: "Find $\\frac{d}{dx}\\left[\\frac{x}{x+1}\\right]$",
    questionHe: "מצא $\\frac{d}{dx}\\left[\\frac{x}{x+1}\\right]$",
    difficulty: "easy",
    xpReward: 10,
    answer: "1/(x+1)²",
    answerType: "expression",
    tip: "Quotient rule: (f/g)' = (f'g - fg')/g²",
    tipHe: "כלל המנה: (f/g)' = (f'g - fg')/g²",
    estimatedMinutes: 4,
  },
  {
    id: "pro-quo-e-004",
    topicId: "product-quotient",
    question: "Find $\\frac{d}{dx}[(x+1)(x-1)]$",
    questionHe: "מצא $\\frac{d}{dx}[(x+1)(x-1)]$",
    difficulty: "easy",
    xpReward: 10,
    answer: "2x",
    answerType: "expression",
    tip: "You can expand first or use product rule",
    tipHe: "ניתן לפתח קודם או להשתמש בכלל המכפלה",
    estimatedMinutes: 3,
  },
  {
    id: "pro-quo-e-005",
    topicId: "product-quotient",
    question: "Find $\\frac{d}{dx}\\left[\\frac{1}{x+2}\\right]$",
    questionHe: "מצא $\\frac{d}{dx}\\left[\\frac{1}{x+2}\\right]$",
    difficulty: "easy",
    xpReward: 10,
    answer: "-1/(x+2)²",
    answerType: "expression",
    tip: "Use quotient rule or rewrite as (x+2)⁻¹",
    tipHe: "השתמש בכלל המנה או רשום מחדש כ-(x+2)⁻¹",
    estimatedMinutes: 3,
  },
  // Medium (5)
  {
    id: "pro-quo-m-001",
    topicId: "product-quotient",
    question: "Find $\\frac{d}{dx}\\left[\\frac{x^2}{x+1}\\right]$",
    questionHe: "מצא $\\frac{d}{dx}\\left[\\frac{x^2}{x+1}\\right]$",
    difficulty: "medium",
    xpReward: 15,
    answer: "(x² + 2x)/(x+1)²",
    answerType: "expression",
    tip: "Apply quotient rule, then simplify",
    tipHe: "הפעל כלל המנה, ואז פשט",
    estimatedMinutes: 5,
  },
  {
    id: "pro-quo-m-002",
    topicId: "product-quotient",
    question: "Find $\\frac{d}{dx}[x^3 \\cos x]$",
    questionHe: "מצא $\\frac{d}{dx}[x^3 \\cos x]$",
    difficulty: "medium",
    xpReward: 15,
    answer: "3x² cos x - x³ sin x",
    answerType: "expression",
    tip: "Product rule: f = x³, g = cos x",
    tipHe: "כלל המכפלה: f = x³, g = cos x",
    estimatedMinutes: 4,
  },
  {
    id: "pro-quo-m-003",
    topicId: "product-quotient",
    question: "Find $\\frac{d}{dx}\\left[\\frac{\\sin x}{x}\\right]$",
    questionHe: "מצא $\\frac{d}{dx}\\left[\\frac{\\sin x}{x}\\right]$",
    difficulty: "medium",
    xpReward: 15,
    answer: "(x cos x - sin x)/x²",
    answerType: "expression",
    tip: "Quotient rule with f = sin x, g = x",
    tipHe: "כלל המנה עם f = sin x, g = x",
    estimatedMinutes: 4,
  },
  {
    id: "pro-quo-m-004",
    topicId: "product-quotient",
    question: "Find $\\frac{d}{dx}[(2x+1)(3x-2)]$",
    questionHe: "מצא $\\frac{d}{dx}[(2x+1)(3x-2)]$",
    difficulty: "medium",
    xpReward: 15,
    answer: "12x - 1",
    answerType: "expression",
    tip: "Use product rule or expand first",
    tipHe: "השתמש בכלל המכפלה או פתח קודם",
    estimatedMinutes: 4,
  },
  {
    id: "pro-quo-m-005",
    topicId: "product-quotient",
    question: "Find $\\frac{d}{dx}\\left[\\frac{e^x}{x}\\right]$",
    questionHe: "מצא $\\frac{d}{dx}\\left[\\frac{e^x}{x}\\right]$",
    difficulty: "medium",
    xpReward: 15,
    answer: "(xeˣ - eˣ)/x²",
    answerType: "expression",
    tip: "Quotient rule with f = eˣ, g = x",
    tipHe: "כלל המנה עם f = eˣ, g = x",
    estimatedMinutes: 4,
  },
  // Hard (5)
  {
    id: "pro-quo-h-001",
    topicId: "product-quotient",
    question: "Find $\\frac{d}{dx}\\left[\\frac{x^2 + 1}{x^2 - 1}\\right]$",
    questionHe: "מצא $\\frac{d}{dx}\\left[\\frac{x^2 + 1}{x^2 - 1}\\right]$",
    difficulty: "hard",
    xpReward: 20,
    answer: "-4x/(x² - 1)²",
    answerType: "expression",
    tip: "Quotient rule, then simplify the numerator",
    tipHe: "כלל המנה, ואז פשט את המונה",
    estimatedMinutes: 6,
  },
  {
    id: "pro-quo-h-002",
    topicId: "product-quotient",
    question: "Find $\\frac{d}{dx}[x^2 e^x \\sin x]$",
    questionHe: "מצא $\\frac{d}{dx}[x^2 e^x \\sin x]$",
    difficulty: "hard",
    xpReward: 20,
    answer: "eˣ(x² sin x + 2x sin x + x² cos x)",
    answerType: "expression",
    tip: "Use product rule twice or for three functions: (fgh)' = f'gh + fg'h + fgh'",
    tipHe: "השתמש בכלל המכפלה פעמיים או לשלוש פונקציות",
    estimatedMinutes: 7,
  },
  {
    id: "pro-quo-h-003",
    topicId: "product-quotient",
    question: "Find $\\frac{d}{dx}\\left[\\frac{\\tan x}{x^2}\\right]$",
    questionHe: "מצא $\\frac{d}{dx}\\left[\\frac{\\tan x}{x^2}\\right]$",
    difficulty: "hard",
    xpReward: 20,
    answer: "(x sec²x - 2 tan x)/x³",
    answerType: "expression",
    tip: "Quotient rule with f = tan x, g = x²",
    tipHe: "כלל המנה עם f = tan x, g = x²",
    estimatedMinutes: 6,
  },
  {
    id: "pro-quo-h-004",
    topicId: "product-quotient",
    question: "Find the equation of the tangent to $y = \\frac{x}{x+1}$ at $x = 1$",
    questionHe: "מצא את משוואת המשיק ל-$y = \\frac{x}{x+1}$ ב-$x = 1$",
    difficulty: "hard",
    xpReward: 20,
    answer: "y = x/4 + 1/4",
    answerType: "expression",
    tip: "Find y(1) and y'(1), use point-slope form",
    tipHe: "מצא y(1) ו-y'(1), השתמש בצורת נקודה-שיפוע",
    estimatedMinutes: 7,
  },
  {
    id: "pro-quo-h-005",
    topicId: "product-quotient",
    question: "If $y = \\frac{x^3 - 1}{x^2 + 1}$, find $y'(0)$",
    questionHe: "אם $y = \\frac{x^3 - 1}{x^2 + 1}$, מצא $y'(0)$",
    difficulty: "hard",
    xpReward: 20,
    answer: "2",
    answerType: "numeric",
    tip: "Find y' using quotient rule, then evaluate at x = 0",
    tipHe: "מצא y' באמצעות כלל המנה, ואז הצב x = 0",
    estimatedMinutes: 6,
  },
];

// ============================================
// TOPIC 7: TRIGONOMETRIC DERIVATIVES (trig)
// ============================================
const TRIG_DERIVATIVES_EXERCISES: Exercise[] = [
  // Easy (5)
  {
    id: "trig-e-001",
    topicId: "trig-derivatives",
    question: "Find $\\frac{d}{dx}[\\sin x + \\cos x]$",
    questionHe: "מצא $\\frac{d}{dx}[\\sin x + \\cos x]$",
    difficulty: "easy",
    xpReward: 10,
    answer: "cos x - sin x",
    answerType: "expression",
    tip: "(sin x)' = cos x, (cos x)' = -sin x",
    tipHe: "(sin x)' = cos x, (cos x)' = -sin x",
    estimatedMinutes: 2,
  },
  {
    id: "trig-e-002",
    topicId: "trig-derivatives",
    question: "Find $\\frac{d}{dx}[3\\sin x]$",
    questionHe: "מצא $\\frac{d}{dx}[3\\sin x]$",
    difficulty: "easy",
    xpReward: 10,
    answer: "3 cos x",
    answerType: "expression",
    tip: "Constants factor out of derivatives",
    tipHe: "קבועים יוצאים מהנגזרת",
    estimatedMinutes: 2,
  },
  {
    id: "trig-e-003",
    topicId: "trig-derivatives",
    question: "Find $\\frac{d}{dx}[\\tan x]$",
    questionHe: "מצא $\\frac{d}{dx}[\\tan x]$",
    difficulty: "easy",
    xpReward: 10,
    answer: "sec²x",
    answerType: "expression",
    tip: "This is a fundamental trig derivative",
    tipHe: "זוהי נגזרת טריגונומטרית יסודית",
    estimatedMinutes: 2,
  },
  {
    id: "trig-e-004",
    topicId: "trig-derivatives",
    question: "Find $\\frac{d}{dx}[\\sec x]$",
    questionHe: "מצא $\\frac{d}{dx}[\\sec x]$",
    difficulty: "easy",
    xpReward: 10,
    answer: "sec x tan x",
    answerType: "expression",
    tip: "Memorize: (sec x)' = sec x tan x",
    tipHe: "שנן: (sec x)' = sec x tan x",
    estimatedMinutes: 2,
  },
  {
    id: "trig-e-005",
    topicId: "trig-derivatives",
    question: "Evaluate $\\frac{d}{dx}[\\cos x]$ at $x = 0$",
    questionHe: "חשב $\\frac{d}{dx}[\\cos x]$ ב-$x = 0$",
    difficulty: "easy",
    xpReward: 10,
    answer: "0",
    answerType: "numeric",
    tip: "(cos x)' = -sin x, and sin(0) = 0",
    tipHe: "(cos x)' = -sin x, ו-sin(0) = 0",
    estimatedMinutes: 2,
  },
  // Medium (5)
  {
    id: "trig-m-001",
    topicId: "trig-derivatives",
    question: "Find $\\frac{d}{dx}[x \\sin x]$",
    questionHe: "מצא $\\frac{d}{dx}[x \\sin x]$",
    difficulty: "medium",
    xpReward: 15,
    answer: "sin x + x cos x",
    answerType: "expression",
    tip: "Product rule: f = x, g = sin x",
    tipHe: "כלל המכפלה: f = x, g = sin x",
    estimatedMinutes: 3,
  },
  {
    id: "trig-m-002",
    topicId: "trig-derivatives",
    question: "Find $\\frac{d}{dx}[\\sin^2 x]$",
    questionHe: "מצא $\\frac{d}{dx}[\\sin^2 x]$",
    difficulty: "medium",
    xpReward: 15,
    answer: "2 sin x cos x = sin 2x",
    answerType: "expression",
    tip: "Use chain rule: d/dx[sin²x] = 2 sin x · (sin x)'",
    tipHe: "השתמש בכלל השרשרת",
    estimatedMinutes: 4,
  },
  {
    id: "trig-m-003",
    topicId: "trig-derivatives",
    question: "Find $\\frac{d}{dx}[\\tan x + \\cot x]$",
    questionHe: "מצא $\\frac{d}{dx}[\\tan x + \\cot x]$",
    difficulty: "medium",
    xpReward: 15,
    answer: "sec²x - csc²x",
    answerType: "expression",
    tip: "(tan x)' = sec²x, (cot x)' = -csc²x",
    tipHe: "(tan x)' = sec²x, (cot x)' = -csc²x",
    estimatedMinutes: 3,
  },
  {
    id: "trig-m-004",
    topicId: "trig-derivatives",
    question: "Find $\\frac{d}{dx}\\left[\\frac{\\sin x}{\\cos x}\\right]$ using quotient rule",
    questionHe: "מצא $\\frac{d}{dx}\\left[\\frac{\\sin x}{\\cos x}\\right]$ באמצעות כלל המנה",
    difficulty: "medium",
    xpReward: 15,
    answer: "sec²x",
    answerType: "expression",
    tip: "You should get the derivative of tan x",
    tipHe: "אתה אמור לקבל את הנגזרת של tan x",
    estimatedMinutes: 5,
  },
  {
    id: "trig-m-005",
    topicId: "trig-derivatives",
    question: "Find $\\frac{d}{dx}[\\cos x - x\\sin x]$",
    questionHe: "מצא $\\frac{d}{dx}[\\cos x - x\\sin x]$",
    difficulty: "medium",
    xpReward: 15,
    answer: "-x cos x",
    answerType: "expression",
    tip: "Differentiate term by term, using product rule for x sin x",
    tipHe: "גזור איבר איבר, השתמש בכלל המכפלה עבור x sin x",
    estimatedMinutes: 4,
  },
  // Hard (5)
  {
    id: "trig-h-001",
    topicId: "trig-derivatives",
    question: "Find $\\frac{d}{dx}[\\sec x \\tan x]$",
    questionHe: "מצא $\\frac{d}{dx}[\\sec x \\tan x]$",
    difficulty: "hard",
    xpReward: 20,
    answer: "sec x tan²x + sec³x",
    answerType: "expression",
    tip: "Product rule, then use trig identities to simplify",
    tipHe: "כלל המכפלה, ואז השתמש בזהויות טריגונומטריות לפישוט",
    estimatedMinutes: 6,
  },
  {
    id: "trig-h-002",
    topicId: "trig-derivatives",
    question: "Find $\\frac{d^2}{dx^2}[\\sin x]$",
    questionHe: "מצא $\\frac{d^2}{dx^2}[\\sin x]$",
    difficulty: "hard",
    xpReward: 20,
    answer: "-sin x",
    answerType: "expression",
    tip: "Differentiate twice: sin → cos → -sin",
    tipHe: "גזור פעמיים: sin → cos → -sin",
    estimatedMinutes: 3,
  },
  {
    id: "trig-h-003",
    topicId: "trig-derivatives",
    question: "If $y = \\sin x \\cos x$, find $y''$",
    questionHe: "אם $y = \\sin x \\cos x$, מצא $y''$",
    difficulty: "hard",
    xpReward: 20,
    answer: "-4 sin x cos x = -2 sin 2x",
    answerType: "expression",
    tip: "First simplify: sin x cos x = (1/2)sin 2x, then differentiate twice",
    tipHe: "פשט קודם: sin x cos x = (1/2)sin 2x, ואז גזור פעמיים",
    estimatedMinutes: 6,
  },
  {
    id: "trig-h-004",
    topicId: "trig-derivatives",
    question: "Find all $x$ in $[0, 2\\pi]$ where the tangent to $y = \\sin x$ is horizontal",
    questionHe: "מצא את כל ה-$x$ ב-$[0, 2\\pi]$ שבהם המשיק ל-$y = \\sin x$ אופקי",
    difficulty: "hard",
    xpReward: 20,
    answer: "x = π/2, x = 3π/2",
    answerType: "expression",
    tip: "Solve y' = cos x = 0",
    tipHe: "פתור y' = cos x = 0",
    estimatedMinutes: 5,
  },
  {
    id: "trig-h-005",
    topicId: "trig-derivatives",
    question: "Prove that $\\frac{d}{dx}[\\cot x] = -\\csc^2 x$",
    questionHe: "הוכח ש-$\\frac{d}{dx}[\\cot x] = -\\csc^2 x$",
    difficulty: "hard",
    xpReward: 20,
    answer: "proof",
    answerType: "proof",
    tip: "Write cot x = cos x/sin x and use quotient rule",
    tipHe: "רשום cot x = cos x/sin x והשתמש בכלל המנה",
    estimatedMinutes: 7,
  },
];

// ============================================
// TOPIC 8: CHAIN RULE (chain)
// ============================================
const CHAIN_RULE_EXERCISES: Exercise[] = [
  // Easy (5)
  {
    id: "chain-e-001",
    topicId: "chain-rule",
    question: "Find $\\frac{d}{dx}[(x+1)^5]$",
    questionHe: "מצא $\\frac{d}{dx}[(x+1)^5]$",
    difficulty: "easy",
    xpReward: 10,
    answer: "5(x+1)⁴",
    answerType: "expression",
    tip: "Chain rule: d/dx[f(g(x))] = f'(g(x)) · g'(x)",
    tipHe: "כלל השרשרת: d/dx[f(g(x))] = f'(g(x)) · g'(x)",
    estimatedMinutes: 3,
  },
  {
    id: "chain-e-002",
    topicId: "chain-rule",
    question: "Find $\\frac{d}{dx}[\\sin(2x)]$",
    questionHe: "מצא $\\frac{d}{dx}[\\sin(2x)]$",
    difficulty: "easy",
    xpReward: 10,
    answer: "2 cos(2x)",
    answerType: "expression",
    tip: "Outer: sin, Inner: 2x. Multiply by inner derivative",
    tipHe: "חיצונית: sin, פנימית: 2x. כפול בנגזרת הפנימית",
    estimatedMinutes: 3,
  },
  {
    id: "chain-e-003",
    topicId: "chain-rule",
    question: "Find $\\frac{d}{dx}[e^{3x}]$",
    questionHe: "מצא $\\frac{d}{dx}[e^{3x}]$",
    difficulty: "easy",
    xpReward: 10,
    answer: "3e^(3x)",
    answerType: "expression",
    tip: "d/dx[eᵘ] = eᵘ · u'",
    tipHe: "d/dx[eᵘ] = eᵘ · u'",
    estimatedMinutes: 3,
  },
  {
    id: "chain-e-004",
    topicId: "chain-rule",
    question: "Find $\\frac{d}{dx}[(2x-1)^3]$",
    questionHe: "מצא $\\frac{d}{dx}[(2x-1)^3]$",
    difficulty: "easy",
    xpReward: 10,
    answer: "6(2x-1)²",
    answerType: "expression",
    tip: "Power chain rule: 3(2x-1)² · 2",
    tipHe: "כלל החזקה עם שרשרת: 3(2x-1)² · 2",
    estimatedMinutes: 3,
  },
  {
    id: "chain-e-005",
    topicId: "chain-rule",
    question: "Find $\\frac{d}{dx}[\\cos(3x)]$",
    questionHe: "מצא $\\frac{d}{dx}[\\cos(3x)]$",
    difficulty: "easy",
    xpReward: 10,
    answer: "-3 sin(3x)",
    answerType: "expression",
    tip: "(cos u)' = -sin u · u'",
    tipHe: "(cos u)' = -sin u · u'",
    estimatedMinutes: 3,
  },
  // Medium (5)
  {
    id: "chain-m-001",
    topicId: "chain-rule",
    question: "Find $\\frac{d}{dx}[\\sqrt{x^2+1}]$",
    questionHe: "מצא $\\frac{d}{dx}[\\sqrt{x^2+1}]$",
    difficulty: "medium",
    xpReward: 15,
    answer: "x/√(x²+1)",
    answerType: "expression",
    tip: "Write as (x²+1)^(1/2), then chain rule",
    tipHe: "רשום כ-(x²+1)^(1/2), ואז כלל השרשרת",
    estimatedMinutes: 4,
  },
  {
    id: "chain-m-002",
    topicId: "chain-rule",
    question: "Find $\\frac{d}{dx}[\\sin(x^2)]$",
    questionHe: "מצא $\\frac{d}{dx}[\\sin(x^2)]$",
    difficulty: "medium",
    xpReward: 15,
    answer: "2x cos(x²)",
    answerType: "expression",
    tip: "Outer: sin, Inner: x². Chain rule gives cos(x²) · 2x",
    tipHe: "חיצונית: sin, פנימית: x². כלל השרשרת נותן cos(x²) · 2x",
    estimatedMinutes: 4,
  },
  {
    id: "chain-m-003",
    topicId: "chain-rule",
    question: "Find $\\frac{d}{dx}[e^{x^2}]$",
    questionHe: "מצא $\\frac{d}{dx}[e^{x^2}]$",
    difficulty: "medium",
    xpReward: 15,
    answer: "2x e^(x²)",
    answerType: "expression",
    tip: "d/dx[eᵘ] = eᵘ · u', where u = x²",
    tipHe: "d/dx[eᵘ] = eᵘ · u', כאשר u = x²",
    estimatedMinutes: 4,
  },
  {
    id: "chain-m-004",
    topicId: "chain-rule",
    question: "Find $\\frac{d}{dx}[\\ln(x^2+1)]$",
    questionHe: "מצא $\\frac{d}{dx}[\\ln(x^2+1)]$",
    difficulty: "medium",
    xpReward: 15,
    answer: "2x/(x²+1)",
    answerType: "expression",
    tip: "d/dx[ln u] = u'/u",
    tipHe: "d/dx[ln u] = u'/u",
    estimatedMinutes: 4,
  },
  {
    id: "chain-m-005",
    topicId: "chain-rule",
    question: "Find $\\frac{d}{dx}[\\tan(2x+1)]$",
    questionHe: "מצא $\\frac{d}{dx}[\\tan(2x+1)]$",
    difficulty: "medium",
    xpReward: 15,
    answer: "2 sec²(2x+1)",
    answerType: "expression",
    tip: "(tan u)' = sec²u · u'",
    tipHe: "(tan u)' = sec²u · u'",
    estimatedMinutes: 4,
  },
  // Hard (5)
  {
    id: "chain-h-001",
    topicId: "chain-rule",
    question: "Find $\\frac{d}{dx}[\\sin^3(2x)]$",
    questionHe: "מצא $\\frac{d}{dx}[\\sin^3(2x)]$",
    difficulty: "hard",
    xpReward: 20,
    answer: "6 sin²(2x) cos(2x)",
    answerType: "expression",
    tip: "Double chain: outer u³, then sin, then 2x",
    tipHe: "שרשרת כפולה: u³ חיצונית, אז sin, אז 2x",
    estimatedMinutes: 6,
  },
  {
    id: "chain-h-002",
    topicId: "chain-rule",
    question: "Find $\\frac{d}{dx}[e^{\\sin x}]$",
    questionHe: "מצא $\\frac{d}{dx}[e^{\\sin x}]$",
    difficulty: "hard",
    xpReward: 20,
    answer: "cos x · e^(sin x)",
    answerType: "expression",
    tip: "d/dx[eᵘ] = eᵘ · u', where u = sin x",
    tipHe: "d/dx[eᵘ] = eᵘ · u', כאשר u = sin x",
    estimatedMinutes: 5,
  },
  {
    id: "chain-h-003",
    topicId: "chain-rule",
    question: "Find $\\frac{d}{dx}[\\ln(\\sin x)]$",
    questionHe: "מצא $\\frac{d}{dx}[\\ln(\\sin x)]$",
    difficulty: "hard",
    xpReward: 20,
    answer: "cot x",
    answerType: "expression",
    tip: "d/dx[ln u] = u'/u = cos x/sin x = cot x",
    tipHe: "d/dx[ln u] = u'/u = cos x/sin x = cot x",
    estimatedMinutes: 5,
  },
  {
    id: "chain-h-004",
    topicId: "chain-rule",
    question: "Find $\\frac{d}{dx}[\\sqrt{1 + e^x}]$",
    questionHe: "מצא $\\frac{d}{dx}[\\sqrt{1 + e^x}]$",
    difficulty: "hard",
    xpReward: 20,
    answer: "eˣ/(2√(1+eˣ))",
    answerType: "expression",
    tip: "Chain rule with u = 1 + eˣ",
    tipHe: "כלל השרשרת עם u = 1 + eˣ",
    estimatedMinutes: 5,
  },
  {
    id: "chain-h-005",
    topicId: "chain-rule",
    question: "Find $\\frac{d}{dx}[\\cos(e^{2x})]$",
    questionHe: "מצא $\\frac{d}{dx}[\\cos(e^{2x})]$",
    difficulty: "hard",
    xpReward: 20,
    answer: "-2e^(2x) sin(e^(2x))",
    answerType: "expression",
    tip: "Double chain: d/dx[cos u] = -sin u · u', then u = e^(2x)",
    tipHe: "שרשרת כפולה: d/dx[cos u] = -sin u · u', ואז u = e^(2x)",
    estimatedMinutes: 6,
  },
];

// ============================================
// TOPIC 9: EXPONENTIAL & LOG DERIVATIVES (exp-log)
// ============================================
const EXP_LOG_EXERCISES: Exercise[] = [
  // Easy (5)
  {
    id: "exp-log-e-001",
    topicId: "exp-log-derivatives",
    question: "Find $\\frac{d}{dx}[e^x]$",
    questionHe: "מצא $\\frac{d}{dx}[e^x]$",
    difficulty: "easy",
    xpReward: 10,
    answer: "eˣ",
    answerType: "expression",
    tip: "The exponential function is its own derivative",
    tipHe: "הפונקציה האקספוננציאלית היא הנגזרת של עצמה",
    estimatedMinutes: 1,
  },
  {
    id: "exp-log-e-002",
    topicId: "exp-log-derivatives",
    question: "Find $\\frac{d}{dx}[\\ln x]$",
    questionHe: "מצא $\\frac{d}{dx}[\\ln x]$",
    difficulty: "easy",
    xpReward: 10,
    answer: "1/x",
    answerType: "expression",
    tip: "Fundamental logarithm derivative",
    tipHe: "נגזרת לוגריתמית יסודית",
    estimatedMinutes: 1,
  },
  {
    id: "exp-log-e-003",
    topicId: "exp-log-derivatives",
    question: "Find $\\frac{d}{dx}[5e^x]$",
    questionHe: "מצא $\\frac{d}{dx}[5e^x]$",
    difficulty: "easy",
    xpReward: 10,
    answer: "5eˣ",
    answerType: "expression",
    tip: "Constants factor out",
    tipHe: "קבועים יוצאים מהנגזרת",
    estimatedMinutes: 2,
  },
  {
    id: "exp-log-e-004",
    topicId: "exp-log-derivatives",
    question: "Find $\\frac{d}{dx}[2^x]$",
    questionHe: "מצא $\\frac{d}{dx}[2^x]$",
    difficulty: "easy",
    xpReward: 10,
    answer: "2ˣ ln 2",
    answerType: "expression",
    tip: "d/dx[aˣ] = aˣ ln a",
    tipHe: "d/dx[aˣ] = aˣ ln a",
    estimatedMinutes: 2,
  },
  {
    id: "exp-log-e-005",
    topicId: "exp-log-derivatives",
    question: "Find $\\frac{d}{dx}[e^x + \\ln x]$",
    questionHe: "מצא $\\frac{d}{dx}[e^x + \\ln x]$",
    difficulty: "easy",
    xpReward: 10,
    answer: "eˣ + 1/x",
    answerType: "expression",
    tip: "Sum rule: differentiate each term",
    tipHe: "כלל הסכום: גזור כל איבר",
    estimatedMinutes: 2,
  },
  // Medium (5)
  {
    id: "exp-log-m-001",
    topicId: "exp-log-derivatives",
    question: "Find $\\frac{d}{dx}[x e^x]$",
    questionHe: "מצא $\\frac{d}{dx}[x e^x]$",
    difficulty: "medium",
    xpReward: 15,
    answer: "eˣ + xeˣ = (1+x)eˣ",
    answerType: "expression",
    tip: "Product rule: f = x, g = eˣ",
    tipHe: "כלל המכפלה: f = x, g = eˣ",
    estimatedMinutes: 4,
  },
  {
    id: "exp-log-m-002",
    topicId: "exp-log-derivatives",
    question: "Find $\\frac{d}{dx}[\\ln(3x)]$",
    questionHe: "מצא $\\frac{d}{dx}[\\ln(3x)]$",
    difficulty: "medium",
    xpReward: 15,
    answer: "1/x",
    answerType: "expression",
    tip: "Chain rule: (1/(3x)) · 3 = 1/x, or use ln(3x) = ln 3 + ln x",
    tipHe: "כלל השרשרת או השתמש ב-ln(3x) = ln 3 + ln x",
    estimatedMinutes: 3,
  },
  {
    id: "exp-log-m-003",
    topicId: "exp-log-derivatives",
    question: "Find $\\frac{d}{dx}[e^{-x}]$",
    questionHe: "מצא $\\frac{d}{dx}[e^{-x}]$",
    difficulty: "medium",
    xpReward: 15,
    answer: "-e^(-x)",
    answerType: "expression",
    tip: "Chain rule with u = -x",
    tipHe: "כלל השרשרת עם u = -x",
    estimatedMinutes: 3,
  },
  {
    id: "exp-log-m-004",
    topicId: "exp-log-derivatives",
    question: "Find $\\frac{d}{dx}[\\log_{10} x]$",
    questionHe: "מצא $\\frac{d}{dx}[\\log_{10} x]$",
    difficulty: "medium",
    xpReward: 15,
    answer: "1/(x ln 10)",
    answerType: "expression",
    tip: "d/dx[log_a x] = 1/(x ln a)",
    tipHe: "d/dx[log_a x] = 1/(x ln a)",
    estimatedMinutes: 3,
  },
  {
    id: "exp-log-m-005",
    topicId: "exp-log-derivatives",
    question: "Find $\\frac{d}{dx}[\\ln(x^2)]$",
    questionHe: "מצא $\\frac{d}{dx}[\\ln(x^2)]$",
    difficulty: "medium",
    xpReward: 15,
    answer: "2/x",
    answerType: "expression",
    tip: "Use ln(x²) = 2 ln x, or chain rule",
    tipHe: "השתמש ב-ln(x²) = 2 ln x, או כלל השרשרת",
    estimatedMinutes: 3,
  },
  // Hard (5)
  {
    id: "exp-log-h-001",
    topicId: "exp-log-derivatives",
    question: "Find $\\frac{d}{dx}[x^x]$ using logarithmic differentiation",
    questionHe: "מצא $\\frac{d}{dx}[x^x]$ באמצעות גזירה לוגריתמית",
    difficulty: "hard",
    xpReward: 20,
    answer: "xˣ(ln x + 1)",
    answerType: "expression",
    tip: "Take ln: ln y = x ln x, differentiate implicitly",
    tipHe: "קח ln: ln y = x ln x, גזור באופן מרומז",
    estimatedMinutes: 7,
  },
  {
    id: "exp-log-h-002",
    topicId: "exp-log-derivatives",
    question: "Find $\\frac{d}{dx}[\\frac{e^x}{x^2}]$",
    questionHe: "מצא $\\frac{d}{dx}[\\frac{e^x}{x^2}]$",
    difficulty: "hard",
    xpReward: 20,
    answer: "eˣ(x-2)/x³",
    answerType: "expression",
    tip: "Quotient rule, then factor out eˣ",
    tipHe: "כלל המנה, ואז הוצא eˣ כגורם משותף",
    estimatedMinutes: 6,
  },
  {
    id: "exp-log-h-003",
    topicId: "exp-log-derivatives",
    question: "Find $\\frac{d}{dx}[\\ln(\\sqrt{x^2+1})]$",
    questionHe: "מצא $\\frac{d}{dx}[\\ln(\\sqrt{x^2+1})]$",
    difficulty: "hard",
    xpReward: 20,
    answer: "x/(x²+1)",
    answerType: "expression",
    tip: "Simplify first: ln(√(x²+1)) = (1/2)ln(x²+1)",
    tipHe: "פשט קודם: ln(√(x²+1)) = (1/2)ln(x²+1)",
    estimatedMinutes: 5,
  },
  {
    id: "exp-log-h-004",
    topicId: "exp-log-derivatives",
    question: "Find $\\frac{d}{dx}[e^{x\\ln x}]$",
    questionHe: "מצא $\\frac{d}{dx}[e^{x\\ln x}]$",
    difficulty: "hard",
    xpReward: 20,
    answer: "xˣ(ln x + 1)",
    answerType: "expression",
    tip: "Note: e^(x ln x) = xˣ, or use chain rule directly",
    tipHe: "שים לב: e^(x ln x) = xˣ, או השתמש בכלל השרשרת ישירות",
    estimatedMinutes: 6,
  },
  {
    id: "exp-log-h-005",
    topicId: "exp-log-derivatives",
    question: "Find the equation of tangent to $y = e^x$ at $x = 0$",
    questionHe: "מצא את משוואת המשיק ל-$y = e^x$ ב-$x = 0$",
    difficulty: "hard",
    xpReward: 20,
    answer: "y = x + 1",
    answerType: "expression",
    tip: "y(0) = 1, y'(0) = 1, use point-slope form",
    tipHe: "y(0) = 1, y'(0) = 1, השתמש בצורת נקודה-שיפוע",
    estimatedMinutes: 5,
  },
];

// ============================================
// TOPIC 10: IMPLICIT DIFFERENTIATION (impl)
// ============================================
const IMPLICIT_EXERCISES: Exercise[] = [
  // Easy (5)
  {
    id: "impl-e-001",
    topicId: "implicit-differentiation",
    question: "Find $\\frac{dy}{dx}$ for $x + y = 5$",
    questionHe: "מצא $\\frac{dy}{dx}$ עבור $x + y = 5$",
    difficulty: "easy",
    xpReward: 10,
    answer: "-1",
    answerType: "numeric",
    tip: "Differentiate both sides: 1 + dy/dx = 0",
    tipHe: "גזור את שני הצדדים: 1 + dy/dx = 0",
    estimatedMinutes: 2,
  },
  {
    id: "impl-e-002",
    topicId: "implicit-differentiation",
    question: "Find $\\frac{dy}{dx}$ for $x^2 + y^2 = 25$",
    questionHe: "מצא $\\frac{dy}{dx}$ עבור $x^2 + y^2 = 25$",
    difficulty: "easy",
    xpReward: 10,
    answer: "-x/y",
    answerType: "expression",
    tip: "Differentiate: 2x + 2y(dy/dx) = 0",
    tipHe: "גזור: 2x + 2y(dy/dx) = 0",
    estimatedMinutes: 3,
  },
  {
    id: "impl-e-003",
    topicId: "implicit-differentiation",
    question: "Find $\\frac{dy}{dx}$ for $xy = 6$",
    questionHe: "מצא $\\frac{dy}{dx}$ עבור $xy = 6$",
    difficulty: "easy",
    xpReward: 10,
    answer: "-y/x",
    answerType: "expression",
    tip: "Product rule on xy: y + x(dy/dx) = 0",
    tipHe: "כלל המכפלה על xy: y + x(dy/dx) = 0",
    estimatedMinutes: 3,
  },
  {
    id: "impl-e-004",
    topicId: "implicit-differentiation",
    question: "Find $\\frac{dy}{dx}$ for $2x + 3y = 10$",
    questionHe: "מצא $\\frac{dy}{dx}$ עבור $2x + 3y = 10$",
    difficulty: "easy",
    xpReward: 10,
    answer: "-2/3",
    answerType: "expression",
    tip: "Differentiate: 2 + 3(dy/dx) = 0",
    tipHe: "גזור: 2 + 3(dy/dx) = 0",
    estimatedMinutes: 2,
  },
  {
    id: "impl-e-005",
    topicId: "implicit-differentiation",
    question: "Find $\\frac{dy}{dx}$ for $y^2 = x$",
    questionHe: "מצא $\\frac{dy}{dx}$ עבור $y^2 = x$",
    difficulty: "easy",
    xpReward: 10,
    answer: "1/(2y)",
    answerType: "expression",
    tip: "Differentiate: 2y(dy/dx) = 1",
    tipHe: "גזור: 2y(dy/dx) = 1",
    estimatedMinutes: 3,
  },
  // Medium (5)
  {
    id: "impl-m-001",
    topicId: "implicit-differentiation",
    question: "Find $\\frac{dy}{dx}$ for $x^2 + xy + y^2 = 7$",
    questionHe: "מצא $\\frac{dy}{dx}$ עבור $x^2 + xy + y^2 = 7$",
    difficulty: "medium",
    xpReward: 15,
    answer: "-(2x+y)/(x+2y)",
    answerType: "expression",
    tip: "Differentiate each term, use product rule on xy",
    tipHe: "גזור כל איבר, השתמש בכלל המכפלה על xy",
    estimatedMinutes: 5,
  },
  {
    id: "impl-m-002",
    topicId: "implicit-differentiation",
    question: "Find $\\frac{dy}{dx}$ for $\\sin y = x$",
    questionHe: "מצא $\\frac{dy}{dx}$ עבור $\\sin y = x$",
    difficulty: "medium",
    xpReward: 15,
    answer: "1/cos y",
    answerType: "expression",
    tip: "cos y · (dy/dx) = 1",
    tipHe: "cos y · (dy/dx) = 1",
    estimatedMinutes: 4,
  },
  {
    id: "impl-m-003",
    topicId: "implicit-differentiation",
    question: "Find $\\frac{dy}{dx}$ for $e^y = x + y$",
    questionHe: "מצא $\\frac{dy}{dx}$ עבור $e^y = x + y$",
    difficulty: "medium",
    xpReward: 15,
    answer: "1/(eʸ - 1)",
    answerType: "expression",
    tip: "eʸ(dy/dx) = 1 + dy/dx, solve for dy/dx",
    tipHe: "eʸ(dy/dx) = 1 + dy/dx, פתור עבור dy/dx",
    estimatedMinutes: 5,
  },
  {
    id: "impl-m-004",
    topicId: "implicit-differentiation",
    question: "Find the slope of the tangent to $x^2 + y^2 = 25$ at $(3, 4)$",
    questionHe: "מצא את שיפוע המשיק ל-$x^2 + y^2 = 25$ בנקודה $(3, 4)$",
    difficulty: "medium",
    xpReward: 15,
    answer: "-3/4",
    answerType: "expression",
    tip: "dy/dx = -x/y, substitute (3, 4)",
    tipHe: "dy/dx = -x/y, הצב (3, 4)",
    estimatedMinutes: 4,
  },
  {
    id: "impl-m-005",
    topicId: "implicit-differentiation",
    question: "Find $\\frac{dy}{dx}$ for $\\ln y = x$",
    questionHe: "מצא $\\frac{dy}{dx}$ עבור $\\ln y = x$",
    difficulty: "medium",
    xpReward: 15,
    answer: "y",
    answerType: "expression",
    tip: "(1/y)(dy/dx) = 1, so dy/dx = y",
    tipHe: "(1/y)(dy/dx) = 1, אז dy/dx = y",
    estimatedMinutes: 4,
  },
  // Hard (5)
  {
    id: "impl-h-001",
    topicId: "implicit-differentiation",
    question: "Find $\\frac{dy}{dx}$ for $x^3 + y^3 = 6xy$",
    questionHe: "מצא $\\frac{dy}{dx}$ עבור $x^3 + y^3 = 6xy$",
    difficulty: "hard",
    xpReward: 20,
    answer: "(2y - x²)/(y² - 2x)",
    answerType: "expression",
    tip: "Differentiate: 3x² + 3y²(dy/dx) = 6y + 6x(dy/dx)",
    tipHe: "גזור: 3x² + 3y²(dy/dx) = 6y + 6x(dy/dx)",
    estimatedMinutes: 7,
  },
  {
    id: "impl-h-002",
    topicId: "implicit-differentiation",
    question: "Find the equation of tangent to $x^2 + y^2 = 25$ at $(3, 4)$",
    questionHe: "מצא את משוואת המשיק ל-$x^2 + y^2 = 25$ בנקודה $(3, 4)$",
    difficulty: "hard",
    xpReward: 20,
    answer: "3x + 4y = 25",
    answerType: "expression",
    tip: "Slope = -3/4, use point-slope form",
    tipHe: "שיפוע = -3/4, השתמש בצורת נקודה-שיפוע",
    estimatedMinutes: 6,
  },
  {
    id: "impl-h-003",
    topicId: "implicit-differentiation",
    question: "Find $\\frac{d^2y}{dx^2}$ for $x^2 + y^2 = 1$",
    questionHe: "מצא $\\frac{d^2y}{dx^2}$ עבור $x^2 + y^2 = 1$",
    difficulty: "hard",
    xpReward: 20,
    answer: "-1/y³",
    answerType: "expression",
    tip: "First find dy/dx = -x/y, then differentiate again",
    tipHe: "קודם מצא dy/dx = -x/y, ואז גזור שוב",
    estimatedMinutes: 8,
  },
  {
    id: "impl-h-004",
    topicId: "implicit-differentiation",
    question: "Find $\\frac{dy}{dx}$ for $y = x^y$",
    questionHe: "מצא $\\frac{dy}{dx}$ עבור $y = x^y$",
    difficulty: "hard",
    xpReward: 20,
    answer: "y²/(x(1 - y ln x))",
    answerType: "expression",
    tip: "Take ln: ln y = y ln x, differentiate implicitly",
    tipHe: "קח ln: ln y = y ln x, גזור באופן מרומז",
    estimatedMinutes: 8,
  },
  {
    id: "impl-h-005",
    topicId: "implicit-differentiation",
    question: "Find all points on $x^2 + y^2 = 1$ where the tangent is horizontal",
    questionHe: "מצא את כל הנקודות על $x^2 + y^2 = 1$ שבהן המשיק אופקי",
    difficulty: "hard",
    xpReward: 20,
    answer: "(0, 1) and (0, -1)",
    answerType: "expression",
    tip: "dy/dx = -x/y = 0 when x = 0",
    tipHe: "dy/dx = -x/y = 0 כאשר x = 0",
    estimatedMinutes: 5,
  },
];

// Combine all exercises
const ALL_EXERCISES: Exercise[] = [
  ...PRODUCT_QUOTIENT_EXERCISES,
  ...TRIG_DERIVATIVES_EXERCISES,
  ...CHAIN_RULE_EXERCISES,
  ...EXP_LOG_EXERCISES,
  ...IMPLICIT_EXERCISES,
];

// Generate solutions
function generateSolution(exercise: Exercise) {
  const steps: string[] = [];
  const stepsHe: string[] = [];

  steps.push(`Given: ${exercise.question.replace(/\$/g, '')}`);
  steps.push(`Hint: ${exercise.tip}`);
  steps.push(`Work through the problem step by step.`);
  steps.push(`Answer: $\\boxed{${exercise.answer}}$`);

  stepsHe.push(`נתון: ${exercise.questionHe.replace(/\$/g, '')}`);
  stepsHe.push(`רמז: ${exercise.tipHe}`);
  stepsHe.push(`עבור על הבעיה צעד אחר צעד.`);
  stepsHe.push(`תשובה: $\\boxed{${exercise.answer}}$`);

  return {
    exerciseId: exercise.id,
    solution: `The answer is ${exercise.answer}`,
    steps,
    stepsHe,
  };
}

async function seedExercises() {
  console.log("=== Seeding Calculus 1 Exercises (Topics 6-10) ===\n");

  let created = 0;
  let skipped = 0;

  for (const exercise of ALL_EXERCISES) {
    try {
      await databases.createDocument(DATABASE_ID, "exercises", exercise.id, {
        courseId: COURSE_ID,
        topicId: exercise.topicId,
        question: exercise.question,
        questionHe: exercise.questionHe,
        difficulty: exercise.difficulty,
        xpReward: exercise.xpReward,
        answer: exercise.answer,
        answerType: exercise.answerType,
        tip: exercise.tip,
        tipHe: exercise.tipHe,
        estimatedMinutes: exercise.estimatedMinutes,
        isActive: true,
      });
      console.log(`✓ Created: ${exercise.id}`);
      created++;
    } catch (error: unknown) {
      const err = error as { code?: number; message?: string };
      if (err.code === 409) {
        console.log(`○ Skipped: ${exercise.id} (already exists)`);
        skipped++;
      } else {
        console.error(`✗ Error: ${exercise.id}`, err.message);
      }
    }
  }

  console.log("\n=== Creating Solutions ===\n");

  for (const exercise of ALL_EXERCISES) {
    const solution = generateSolution(exercise);
    try {
      await databases.createDocument(DATABASE_ID, "exercise_solutions", ID.unique(), {
        exerciseId: solution.exerciseId,
        solution: solution.solution,
        steps: JSON.stringify(solution.steps),
        stepsHe: JSON.stringify(solution.stepsHe),
      });
      console.log(`✓ Solution: ${exercise.id}`);
    } catch (error: unknown) {
      const err = error as { code?: number; message?: string };
      if (err.code === 409) {
        console.log(`○ Skipped solution: ${exercise.id}`);
      } else {
        console.error(`✗ Solution error: ${exercise.id}`, err.message);
      }
    }
  }

  console.log("\n=== Summary ===");
  console.log(`Exercises created: ${created}`);
  console.log(`Exercises skipped: ${skipped}`);
  console.log(`Total: ${ALL_EXERCISES.length}`);
}

seedExercises().catch(console.error);
