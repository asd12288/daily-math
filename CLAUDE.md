# DailyMath - AI Agent Instructions

## Project Overview

DailyMath is a SaaS application for daily math/physics exercises with AI-powered question generation, gamification, and progress tracking. Users receive personalized daily exercise sets, complete them with handwritten solutions (verified by AI), and build streaks while earning XP.

### Core Value Proposition
- **Daily Practice**: Users choose 1-10 exercises per day
- **AI-Generated Content**: Questions, solutions, and tips generated by Gemini 2.5 Flash
- **Handwork Verification**: AI analyzes photos of handwritten solutions
- **Gamification**: XP system, levels (1-10), streaks with hard reset
- **Bilingual**: Full Hebrew (RTL) and English support

### Target Audience
Israeli university students studying:
- Calculus 1 (×—×“×•"× 1) - Primary focus
- Linear Algebra (××œ×’×‘×¨×” ×œ×™× ×™××¨×™×ª)
- Physics 1 (×¤×™×¡×™×§×” 1) - Coming soon

---

## Tech Stack

### Core Framework
- **Next.js 16** with App Router
- **React 19**
- **TypeScript 5**
- **Tailwind CSS 4** (CSS-based configuration)

### Backend & Data
- **Appwrite** - Auth, Database, Storage
- **tRPC** - Type-safe API layer
- **Zod** - Schema validation

### AI & Content
- **Vercel AI SDK** (`ai` package)
- **@ai-sdk/google** - Gemini 2.5 Flash integration
- **KaTeX** - LaTeX rendering (planned)

### UI Components
- **Flowbite React** - UI component library
- **@iconify/react** - Icons (Tabler icon set)
- **SimpleBar React** - Custom scrollbars
- **React Hook Form** - Form handling

### Internationalization
- **next-intl** - i18n with RTL support
- Locales: `en` (default), `he` (Hebrew)

---

## Architecture

### Modular Architecture Pattern

This project follows a **feature-based modular architecture** inspired by the trader-map project. Each module is self-contained with its own config, types, hooks, server logic, and UI.

```
modules/
â”œâ”€â”€ auth/                    # Authentication module
â”œâ”€â”€ dashboard/               # Dashboard & home
â”œâ”€â”€ courses/                 # Course selection
â”œâ”€â”€ practice/                # Exercise practice flow
â”œâ”€â”€ gamification/            # XP, levels, streaks
â”œâ”€â”€ ai-generation/           # AI question generation
â”œâ”€â”€ notifications/           # Email reminders
â”œâ”€â”€ history/                 # Past exercises
â”œâ”€â”€ profile/                 # User profile
â”œâ”€â”€ settings/                # User preferences
â””â”€â”€ notion-integration/      # Notion sync (optional)
```

### Module Structure

Each module follows this structure:

```
modules/[module-name]/
â”œâ”€â”€ README.md                # Module documentation
â”œâ”€â”€ index.ts                 # Public API exports
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ routes.ts            # Module routes
â”‚   â””â”€â”€ messages.ts          # i18n keys
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ [module].types.ts    # TypeScript interfaces
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ validation.ts        # Zod schemas
â”‚   â””â”€â”€ utils.ts             # Helper functions
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ mutations/           # tRPC mutations
â”‚   â””â”€â”€ queries/             # tRPC queries
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ procedures.ts        # tRPC router
â”‚   â””â”€â”€ services/            # Business logic
â””â”€â”€ ui/
    â”œâ”€â”€ index.ts
    â”œâ”€â”€ components/          # Reusable components
    â”‚   â””â”€â”€ forms/           # Form components
    â””â”€â”€ views/               # Full-page views
```

### Shared Code

```
shared/
â”œâ”€â”€ context/                 # React contexts
â”‚   â””â”€â”€ DashboardContext.tsx
â”œâ”€â”€ layout/                  # Layout components
â”‚   â”œâ”€â”€ Logo.tsx
â”‚   â”œâ”€â”€ header/
â”‚   â”‚   â””â”€â”€ Header.tsx
â”‚   â””â”€â”€ sidebar/
â”‚       â”œâ”€â”€ Sidebar.tsx
â”‚       â”œâ”€â”€ MobileSidebar.tsx
â”‚       â””â”€â”€ SidebarItems.ts
â””â”€â”€ ui/                      # Shared UI components
    â”œâ”€â”€ button.tsx
    â”œâ”€â”€ input.tsx
    â””â”€â”€ card.tsx
```

---

## Design System

### Color Tokens

All colors are defined in `app/globals.css` using CSS custom properties:

```css
/* Primary - Blue (main brand) */
--primary-50 through --primary-900

/* Secondary - Purple (accents) */
--secondary-50 through --secondary-900

/* Success - Green (XP, correct answers, streaks) */
--success-50 through --success-900

/* Warning - Amber (streak warnings) */
--warning-50 through --warning-900

/* Error - Red (errors, streak lost) */
--error-50 through --error-900

/* Gray - Neutral tones */
--gray-50 through --gray-900
```

### Usage in Tailwind

```tsx
// Use semantic color names
<button className="bg-primary-600 hover:bg-primary-700">
<div className="text-success-500">+10 XP</div>
<span className="text-error-600">Streak Lost!</span>
```

### Spacing & Sizing

- Use Tailwind's default spacing scale
- Sidebar width: `270px` (desktop), `280px` (mobile drawer)
- Collapsed sidebar: `75px`
- Header height: `~60px`

### Typography

- Font: Geist Sans (variable: `--font-geist-sans`)
- Mono: Geist Mono (variable: `--font-geist-mono`)
- Math: KaTeX for LaTeX rendering

### Component Patterns

#### Buttons
```tsx
import { Button } from "@/shared/ui";

<Button variant="primary" size="lg" isLoading={isPending}>
  Start Practice
</Button>

// Variants: primary, secondary, outline, ghost, destructive, success
// Sizes: sm, md, lg
```

#### Cards
```tsx
import { Card, CardHeader, CardTitle, CardContent } from "@/shared/ui";

<Card>
  <CardHeader>
    <CardTitle>Today's Set</CardTitle>
  </CardHeader>
  <CardContent>...</CardContent>
</Card>
```

#### Forms
```tsx
import { Input } from "@/shared/ui";
import { useForm } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";

const { register, formState: { errors } } = useForm({
  resolver: zodResolver(schema),
});

<Input
  {...register("email")}
  label={t("auth.email")}
  error={errors.email?.message}
/>
```

---

## Database Schema

### Collections (Appwrite)

Defined in `lib/appwrite/schema.ts`:

1. **users_profile** - User data, gamification stats, preferences
2. **courses** - Available courses with topics
3. **exercises** - Question bank with LaTeX content
4. **daily_sets** - Daily exercise assignments per user
5. **user_answers** - User responses with AI analysis

### TypeScript Types

Defined in `lib/appwrite/types.ts`:

```typescript
interface UserProfile {
  userId: string;
  displayName: string;
  totalXp: number;
  currentLevel: number;      // 1-10
  currentStreak: number;
  dailyExerciseCount: number; // 1-10
  enrolledCourses: string[];
  // ...
}

interface Exercise {
  question: string;           // LaTeX supported
  difficulty: "easy" | "medium" | "hard";
  solution: string;
  answerType: "numeric" | "expression" | "proof" | "open";
  // ...
}
```

### Gamification Constants

```typescript
// XP Levels (lib/appwrite/types.ts)
const XP_LEVELS = [
  { level: 1, title: "Beginner", xpRequired: 0 },
  { level: 2, title: "Student", xpRequired: 100 },
  // ... up to level 10 "Sage" at 10000 XP
];

// XP Awards
const BASE_XP = {
  exerciseCompletion: 10,
  dailySetCompletion: 25,
  streakBonus: 5,        // Per day in streak
  perfectDayBonus: 15,   // All exercises correct
};

// Difficulty multipliers
const DIFFICULTY_MULTIPLIERS = {
  easy: 1,
  medium: 1.5,
  hard: 2,
};
```

---

## API Layer (tRPC)

### Setup

```
trpc/
â”œâ”€â”€ init.ts         # tRPC initialization, procedures
â”œâ”€â”€ client.tsx      # Client-side hooks
â”œâ”€â”€ server.tsx      # Server-side caller
â”œâ”€â”€ provider.tsx    # React Query provider
â””â”€â”€ routers/
    â””â”€â”€ _app.ts     # Root router
```

### Creating a Module Router

```typescript
// modules/[module]/server/procedures.ts
import { createTRPCRouter, publicProcedure, protectedProcedure } from "@/trpc/init";
import { z } from "zod";

export const moduleRouter = createTRPCRouter({
  getAll: publicProcedure.query(async () => {
    // ...
  }),

  create: protectedProcedure
    .input(z.object({ name: z.string() }))
    .mutation(async ({ ctx, input }) => {
      // ctx.user is guaranteed to exist
    }),
});
```

### Using in Components

```typescript
// Client components
import { trpc } from "@/trpc/client";

function MyComponent() {
  const { data, isLoading } = trpc.module.getAll.useQuery();
  const mutation = trpc.module.create.useMutation();
}
```

---

## Internationalization (i18n)

### Configuration

```typescript
// i18n/config.ts
export const locales = ["en", "he"] as const;
export const defaultLocale = "en";
export const rtlLocales = ["he"];
```

### Message Files

```
messages/
â”œâ”€â”€ en/
â”‚   â””â”€â”€ index.json
â””â”€â”€ he/
    â””â”€â”€ index.json
```

### Usage

```typescript
import { useTranslations } from "next-intl";

function MyComponent() {
  const t = useTranslations();

  return (
    <h1>{t("dashboard.welcome")}</h1>
    <p>{t("practice.exerciseOf", { current: 1, total: 5 })}</p>
  );
}
```

### RTL Support

The locale layout automatically sets `dir="rtl"` for Hebrew:

```tsx
// app/[locale]/layout.tsx
const dir = isRtlLocale(locale) ? "rtl" : "ltr";
return <html lang={locale} dir={dir}>...</html>;
```

---

## File & Folder Conventions

### Route Groups

- `(auth)` - Auth pages (login, register) - no layout wrapper
- `(dashboard)` - Dashboard pages with sidebar/header layout

### Naming Conventions

- **Files**: kebab-case (`user-profile.tsx`)
- **Components**: PascalCase (`UserProfile`)
- **Hooks**: camelCase with `use` prefix (`useUserProfile`)
- **Types**: PascalCase with suffix (`UserProfileType`)
- **Constants**: SCREAMING_SNAKE_CASE (`MAX_EXERCISES`)

### Import Aliases

```typescript
// tsconfig.json paths
"@/*" â†’ "./*"

// Usage
import { Button } from "@/shared/ui";
import { useLogin } from "@/modules/auth";
import { trpc } from "@/trpc/client";
```

---

## Key Workflows

### Authentication Flow

1. User visits `/auth/login` or `/auth/register`
2. Appwrite handles authentication
3. On success, redirect to `/dashboard`
4. Protected routes check auth via `protectedProcedure`

### Daily Practice Flow

1. User opens dashboard â†’ sees today's exercise set
2. Clicks "Start Practice" â†’ `/practice/[setId]`
3. For each exercise:
   - View question (LaTeX rendered)
   - Work on solution (paper)
   - Either self-mark OR upload photo
   - If photo: AI analyzes handwritten work
   - Mark as complete â†’ earn XP
4. Complete all exercises â†’ streak continues

### Streak Rules

- **Hard reset**: Miss one day = streak goes to 0
- Evening warning email if not completed by 8 PM
- Streak bonus XP: `streakDays * 5`

---

## AI Integration

### Question Generation

Using Vercel AI SDK with Gemini 2.5 Flash:

```typescript
import { google } from "@ai-sdk/google";
import { generateObject } from "ai";

const result = await generateObject({
  model: google("gemini-2.0-flash"),
  schema: exerciseSchema,
  prompt: `Generate a ${difficulty} calculus exercise about ${topic}...`,
});
```

### Handwork Analysis

For image analysis of handwritten solutions:

```typescript
const result = await generateObject({
  model: google("gemini-2.0-flash"),
  schema: analysisSchema,
  messages: [
    {
      role: "user",
      content: [
        { type: "text", text: "Analyze this solution..." },
        { type: "image", image: imageBuffer },
      ],
    },
  ],
});
```

---

## Environment Variables

```bash
# .env.local

# Appwrite
NEXT_PUBLIC_APPWRITE_ENDPOINT=https://cloud.appwrite.io/v1
NEXT_PUBLIC_APPWRITE_PROJECT_ID=your-project-id
APPWRITE_DATABASE_ID=your-database-id
APPWRITE_USERS_PROFILE_COLLECTION=users_profile
APPWRITE_COURSES_COLLECTION=courses
APPWRITE_EXERCISES_COLLECTION=exercises
APPWRITE_DAILY_SETS_COLLECTION=daily_sets
APPWRITE_USER_ANSWERS_COLLECTION=user_answers
APPWRITE_USER_IMAGES_BUCKET=user_images

# AI
GOOGLE_GENERATIVE_AI_API_KEY=your-gemini-api-key

# Email (Resend)
RESEND_API_KEY=your-resend-api-key

# Notion (optional)
NOTION_CLIENT_ID=your-notion-client-id
NOTION_CLIENT_SECRET=your-notion-client-secret
```

---

## Development Commands

```bash
# Start development server
npm run dev

# Build for production
npm run build

# Start production server
npm start

# Type check
npx tsc --noEmit

# Lint
npm run lint
```

---

## Code Style Guidelines

### React Components

```tsx
// Use function declarations for components
export function MyComponent({ prop }: MyComponentProps) {
  // Hooks at the top
  const t = useTranslations();
  const [state, setState] = useState();

  // Event handlers
  const handleClick = () => {};

  // Render
  return <div>...</div>;
}
```

### Server Actions vs tRPC

- Use **tRPC** for all data fetching and mutations
- Avoid Next.js Server Actions in favor of tRPC procedures

### Error Handling

```typescript
// In tRPC procedures
import { TRPCError } from "@trpc/server";

throw new TRPCError({
  code: "NOT_FOUND",
  message: "Exercise not found",
});
```

### Validation

Always validate with Zod schemas:

```typescript
// lib/validation.ts
export const exerciseSchema = z.object({
  question: z.string().min(10),
  difficulty: z.enum(["easy", "medium", "hard"]),
  // ...
});

// In tRPC procedures
.input(exerciseSchema)
.mutation(async ({ input }) => {
  // input is fully typed
});
```

---

## Testing (Planned)

- **Vitest** for unit tests
- **Playwright** for E2E tests
- Test files co-located with source: `component.test.tsx`

---

## Deployment

Target: **Vercel**

- Auto-deploy from main branch
- Preview deployments for PRs
- Environment variables in Vercel dashboard

---

## Current Implementation Status

### Completed
- [x] Project structure (modular architecture)
- [x] tRPC setup
- [x] next-intl i18n (EN/HE)
- [x] Tailwind design tokens
- [x] Auth module (UI components, procedures, hooks)
- [x] Dashboard layout (sidebar, header)
- [x] Dashboard home page
- [x] Database schema (TypeScript types)

### In Progress
- [ ] Appwrite collection setup (manual in console)
- [ ] Auth integration with Appwrite

### Planned
- [ ] Course selection page
- [ ] Practice flow
- [ ] AI question generation
- [ ] AI handwork analysis
- [ ] Gamification logic
- [ ] Email notifications (Resend)
- [ ] Notion integration

---

## Important Notes for AI Agents

### CRITICAL: Component Reuse Rule

**BEFORE creating any new UI component, ALWAYS:**
1. Check the **Existing Components** section below
2. Check `shared/ui/` directory for shared components
3. Check the **Modernize Template Reference** section for patterns to adapt
4. Only create a new component if no existing one can be used or extended
5. When creating new shared components, add them to `shared/ui/` and update this document

### General Rules

1. **Always use the modular architecture** - Don't create files outside the established structure
2. **Use tRPC for all API calls** - No direct Appwrite calls from client components
3. **Translations required** - All user-facing text must use `t()` from next-intl
4. **RTL awareness** - Use `start`/`end` instead of `left`/`right` for positioning
5. **Type safety** - All code must pass TypeScript strict mode
6. **Design system** - Use semantic color tokens (primary, success, error) not raw colors
7. **Barrel exports** - Each module must export its public API through `index.ts`

---

## Existing Components

### Shared UI Components (`shared/ui/`)

| Component | File | Description | Props |
|-----------|------|-------------|-------|
| **Button** | `button.tsx` | Primary button with variants | `variant`: primary, secondary, outline, ghost, destructive, success; `size`: sm, md, lg; `isLoading`: boolean |
| **Input** | `input.tsx` | Form input with label & error | `label`, `error`, `helperText` + standard input props |
| **Card** | `card.tsx` | Card container | `variant`: default, bordered |
| **CardHeader** | `card.tsx` | Card header section | - |
| **CardTitle** | `card.tsx` | Card title (h3) | - |
| **CardDescription** | `card.tsx` | Card subtitle text | - |
| **CardContent** | `card.tsx` | Card body content | - |
| **CardFooter** | `card.tsx` | Card footer section | - |

### Layout Components (`shared/layout/`)

| Component | File | Description |
|-----------|------|-------------|
| **Header** | `header/Header.tsx` | Top navigation bar with search, language toggle, XP/streak display, notifications, profile dropdown |
| **Sidebar** | `sidebar/Sidebar.tsx` | Desktop sidebar (270px, collapsible to 75px) |
| **MobileSidebar** | `sidebar/MobileSidebar.tsx` | Mobile drawer sidebar |
| **Logo** | `Logo.tsx` | DailyMath logo with icon and text |
| **SidebarItems** | `sidebar/SidebarItems.ts` | Navigation configuration |

### Context (`shared/context/`)

| Context | File | Description |
|---------|------|-------------|
| **DashboardContext** | `DashboardContext.tsx` | Sidebar state: `isSidebarOpen`, `isMobileSidebarOpen`, `isCollapsed` |

### Module Components

| Module | Components | Location |
|--------|------------|----------|
| **Auth** | LoginForm, RegisterForm, ForgotPasswordForm | `modules/auth/ui/components/forms/` |
| **Dashboard** | DashboardView | `modules/dashboard/ui/views/` |

### Usage Examples

```tsx
// Import shared components
import { Button, Input, Card, CardHeader, CardTitle, CardContent } from "@/shared/ui";

// Card with header and content
<Card>
  <CardHeader>
    <CardTitle>Today's Set</CardTitle>
  </CardHeader>
  <CardContent>
    <p>5 exercises</p>
  </CardContent>
</Card>

// Button variants
<Button variant="primary" size="lg">Start Practice</Button>
<Button variant="success" isLoading={isPending}>Complete</Button>
<Button variant="outline">Cancel</Button>

// Input with error
<Input
  label={t("auth.email")}
  error={errors.email?.message}
  {...register("email")}
/>
```

---

## Modernize Template Reference

The project uses the **Modernize Tailwind Pro** template as design reference. Below are useful components and patterns to adapt.

### HIGH PRIORITY - Core Features

| Component | Template Location | Use in DailyMath |
|-----------|-------------------|------------------|
| **WelcomeCard** | `dashboards/eCommerce/WelcomeCard.tsx` | Dashboard welcome banner with user avatar, stats |
| **TopCards (Swiper)** | `dashboards/modern/TopCards.tsx` | Stats carousel for XP, Streak, Level |
| **YarlyBreakup (Donut)** | `widgets/charts/YarlyBreakup.tsx` | XP distribution, progress chart (ApexCharts) |
| **Tasks** | `dashboards/general/Tasks.tsx` | Today's Exercises list with status badges |
| **UpcomingActivities** | `widgets/cards/UpcommingActivitiesCard.tsx` | Exercise list with icons, titles, time |
| **ProgressBar** | `ui-components/Progressbar/ProgressColor.tsx` | Level progress, daily completion |
| **Calendar** | `apps/calendar/index.tsx` | Streak calendar (react-big-calendar) |

### MEDIUM PRIORITY - Enhanced UX

| Component | Template Location | Use in DailyMath |
|-----------|-------------------|------------------|
| **Timeline** | `ui-components/Timeline/VerticalTimeline.tsx` | Practice history |
| **Toast** | `ui-components/Toast/ToastColors.tsx` | XP earned, streak warnings |
| **DropZone** | `form-components/Form-Elements/DropZone.tsx` | Upload handwritten solutions |
| **RangeSlider** | `form-components/Form-Elements/RangeSlider.tsx` | Daily exercise count (1-10) |
| **CardBox** | `shared/CardBox.tsx` | Consistent card wrapper |
| **ProfileCards** | `widgets/cards/ProfileCards.tsx` | Course selection cards |

### Design Patterns from Template

**Stats Card Pattern:**
```tsx
<Card className="bg-lightprimary dark:bg-lightprimary">
  <div className="flex items-center gap-3">
    <div className="h-11 w-11 rounded-md flex justify-center items-center bg-primary">
      <Icon icon="tabler:star" className="text-white" height={20} />
    </div>
    <div>
      <h5 className="text-lg font-semibold">450 XP</h5>
      <p className="text-sm text-gray-500">Total Earned</p>
    </div>
  </div>
</Card>
```

**List Item Pattern:**
```tsx
<div className="flex gap-3.5 items-center">
  <div className="h-11 w-11 rounded-md flex justify-center items-center bg-lightprimary">
    <Icon icon="tabler:math" height={20} className="text-primary" />
  </div>
  <div className="flex-1">
    <h5 className="text-base">Exercise Title</h5>
    <p className="text-sm text-gray-500">Calculus 1</p>
  </div>
  <span className="text-sm text-gray-500">~5 min</span>
</div>
```

**Badge Pattern:**
```tsx
<span className={`px-2 py-0.5 text-xs font-medium rounded-full ${
  status === "completed"
    ? "bg-success-100 text-success-700"
    : "bg-warning-100 text-warning-700"
}`}>
  {status}
</span>
```

### Additional Dependencies (from template)

```bash
# For charts (if needed)
npm install react-apexcharts apexcharts

# For carousels (if needed)
npm install swiper

# For calendar (if needed)
npm install react-big-calendar moment
```

### Color Classes Reference

```tsx
// Light backgrounds with matching text
bg-lightprimary text-primary    // Blue
bg-lightsuccess text-success    // Green (XP, streaks)
bg-lightwarning text-warning    // Amber (warnings)
bg-lighterror text-error        // Red (errors)
bg-lightsecondary text-secondary // Purple

// Dark mode variants
dark:bg-lightprimary dark:text-primary
```

---

---

## User Stories

### Epic 1: User Onboarding

**US-1.1: Registration**
- Registration form with email, password, display name
- Password validation (min 8 chars)
- Redirect to course selection after registration

**US-1.2: Login**
- Login form with email and password
- Redirect to dashboard after login

**US-1.3: Course Selection**
- Display available courses with descriptions
- Toggle to select/deselect courses
- Minimum 1 course required

**US-1.4: Preferences Setup**
- Slider for exercise count (1-10)
- Time picker for preferred practice time
- Language selection (Hebrew/English)

### Epic 2: Daily Practice

**US-2.1: View Today's Exercises**
- Dashboard shows today's exercises
- Display exercise count and estimated time
- "Start Practice" button

**US-2.2: Practice Session**
- Display one exercise at a time with LaTeX rendering
- Navigation between exercises
- Progress indicator

**US-2.3: Self-Mark Completion**
- "Done" button to mark complete
- Reveal full solution after marking
- Award XP immediately

**US-2.4: AI Answer Verification**
- Image upload (camera/gallery)
- AI analysis with feedback
- Award XP based on correctness

**US-2.5: Session Completion**
- Total XP earned display
- Streak update notification

### Epic 3: Gamification

**US-3.1: Track XP**
- XP display in header
- Difficulty-based rewards (10/20/30)
- Streak bonus multiplier

**US-3.2: Maintain Streaks**
- Streak counter in dashboard
- Hard reset on miss (no forgiveness)
- Warning before streak breaks

**US-3.3: Level Up**
- Level display with title
- Progress bar to next level
- Level up celebration

### Epic 4: Notifications

**US-4.1: Daily Reminder**
- Email at preferred time
- Show today's exercise preview

**US-4.2: Streak Warning**
- Evening notification (8 PM local)
- Only if exercises not completed

### Epic 5: Settings & Profile

**US-5.1: Language Toggle**
- Toggle in header
- Full UI translation with RTL support

**US-5.2: Manage Notifications**
- Toggle daily reminders
- Toggle streak warnings
- Toggle weekly reports

**US-5.3: View History**
- List of past daily sets
- Filter by course/date

### Epic 6: Notion Integration (Optional)

**US-6.1: Connect Notion**
- OAuth connection
- Create database in workspace

**US-6.2: Sync Exercises**
- Auto-sync daily exercises
- Update completion status

---

## Page Mockups

### Dashboard
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo] DailyMath                    [ğŸ””] [EN/HE] [ğŸ‘¤ Profile]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           â”‚                                                     â”‚
â”‚  ğŸ“Š Home  â”‚  Good morning, [Name]!                    ğŸ”¥ 7 days â”‚
â”‚           â”‚                                                     â”‚
â”‚  ğŸ“š Coursesâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚           â”‚  â”‚  Today's Set      â”‚  â”‚  Your Progress   â”‚        â”‚
â”‚  ğŸ“ Historyâ”‚  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚  â”‚  Level 3: Learnerâ”‚        â”‚
â”‚           â”‚  â”‚  5 exercises      â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 450XPâ”‚        â”‚
â”‚  âš™ï¸ Settingsâ”‚  â”‚  Calculus 1      â”‚  â”‚  Next: 600 XP    â”‚        â”‚
â”‚           â”‚  â”‚  ~15 min          â”‚  â”‚                  â”‚        â”‚
â”‚           â”‚  â”‚  [Start Practice] â”‚  â”‚  Total: 450 XP   â”‚        â”‚
â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Practice View
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Back to Dashboard            Exercise 3 of 5         [Exit]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Medium]  Calculus 1 - Derivatives                   20 XP     â”‚
â”‚                                                                 â”‚
â”‚  Question:                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Find the derivative of:                                 â”‚  â”‚
â”‚  â”‚        f(x) = xÂ³ - 2xÂ² + 5x - 3                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  ğŸ’¡ Tip: Remember the power rule: d/dx(xâ¿) = nxâ¿â»Â¹             â”‚
â”‚                                                                 â”‚
â”‚  [ğŸ“· Upload Handwork]              OR        [âœ“ Mark as Done]  â”‚
â”‚                                                                 â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚  [â† Prev]                                            [Next â†’]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Solution Reveal
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ“ Completed!                                         +20 XP    â”‚
â”‚                                                                 â”‚
â”‚  Solution:                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Step 1: Apply the power rule to each term                â”‚  â”‚
â”‚  â”‚    d/dx(xÂ³) = 3xÂ²                                         â”‚  â”‚
â”‚  â”‚    d/dx(-2xÂ²) = -4x                                       â”‚  â”‚
â”‚  â”‚    d/dx(5x) = 5                                           â”‚  â”‚
â”‚  â”‚    d/dx(-3) = 0                                           â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  Step 2: Combine the results                              â”‚  â”‚
â”‚  â”‚    f'(x) = 3xÂ² - 4x + 5                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  Answer: f'(x) = 3xÂ² - 4x + 5                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## System Diagrams

### High-Level Architecture
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              CLIENT (Browser)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Next.js   â”‚  â”‚   React     â”‚  â”‚   KaTeX     â”‚  â”‚  Plotly.js  â”‚    â”‚
â”‚  â”‚  App Router â”‚  â”‚   Views     â”‚  â”‚  Renderer   â”‚  â”‚   Graphs    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚  tRPC/API      â”‚
          â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           VERCEL (Server)                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   tRPC Router   â”‚  â”‚   API Routes    â”‚  â”‚   Cron Jobs         â”‚     â”‚
â”‚  â”‚   (Procedures)  â”‚  â”‚  (AI, Webhooks) â”‚  â”‚  (Daily Send)       â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                    â”‚                     â”‚
            â–¼                    â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     APPWRITE      â”‚  â”‚    VERCEL AI SDK   â”‚  â”‚      RESEND        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚    Auth     â”‚  â”‚  â”‚  â”‚ Gemini 2.5   â”‚  â”‚  â”‚  â”‚    Email     â”‚  â”‚
â”‚  â”‚  (Users)    â”‚  â”‚  â”‚  â”‚    Flash     â”‚  â”‚  â”‚  â”‚   Delivery   â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”‚  Database   â”‚  â”‚  â”‚  â”‚ Gemini 2.5   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â”‚(Collections)â”‚  â”‚  â”‚  â”‚ Flash Image  â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚  Storage    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    NOTION API      â”‚
â”‚  â”‚  (Images)   â”‚  â”‚                          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                          â”‚  â”‚  User Sync   â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Exercise Generation Flow
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cron Job    â”‚ (Daily at midnight per timezone)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
1. Fetch active users with preferences
       â”‚
       â–¼
2. For each user, determine exercises needed
   - count = user.dailyExerciseCount (1-10)
   - courses = user.selectedCourses
   - topics = rotate through course topics
       â”‚
       â–¼
3. Call Gemini 2.5 Flash with structured output
   generateObject({ model, schema, prompt })
       â”‚
       â–¼
4. If exercise needs diagram, call Flash Image
       â”‚
       â–¼
5. Store exercises in database
   INSERT INTO exercises, daily_sets
       â”‚
       â–¼
6. Send notification email via Resend
```

### Practice Session Flow
```
Start Practice â†’ Load Daily Set â†’ Display Exercise
                                       â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                        â”‚                        â”‚
              â–¼                        â–¼                        â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  Mark as Done   â”‚    â”‚  Upload Image   â”‚    â”‚  Skip Exercise  â”‚
     â”‚  (Self-mark)    â”‚    â”‚  (AI Verify)    â”‚    â”‚                 â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                      â”‚                      â”‚
              â”‚                      â–¼                      â”‚
              â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
              â”‚           â”‚  Gemini Flash   â”‚               â”‚
              â”‚           â”‚  Analysis       â”‚               â”‚
              â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
              â”‚                    â”‚                        â”‚
              â–¼                    â–¼                        â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                    Show Solution                     â”‚
         â”‚  - Step-by-step solution                             â”‚
         â”‚  - Correct answer                                    â”‚
         â”‚  - Tips for similar problems                         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚  Award XP       â”‚
                      â”‚  + streak bonus â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                                  â”‚
              â–¼                                  â–¼
     More exercises?                    All Complete
              â”‚                                  â”‚
              â”‚ Yes                              â–¼
              â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                        â”‚  Show Summary   â”‚
              â””â”€â”€â–¶ Next Exercise       â”‚  - Total XP     â”‚
                                       â”‚  - Streak       â”‚
                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## MVP Task List

### Phase 1: Foundation âœ“ (Completed)
- [x] Reorganize folder structure to modular architecture
- [x] Set up tRPC configuration
- [x] Configure next-intl for i18n
- [x] Set up environment variables
- [x] Configure Tailwind with design tokens
- [x] Create auth module structure
- [x] Create dashboard layout (sidebar, header)

### Phase 2: Core Features (Current)
- [x] Create dashboard home page
- [ ] Implement Appwrite auth integration
- [ ] Create courses view
- [ ] Build course card component
- [ ] Set up KaTeX rendering
- [ ] Create exercise card component

### Phase 3: AI Integration
- [ ] Set up Vercel AI SDK with Gemini
- [ ] Create exercise generation service
- [ ] Build LaTeX prompt templates
- [ ] Implement answer verification service
- [ ] Add diagram generation (Gemini Flash Image)

### Phase 4: Practice Flow
- [ ] Create practice view
- [ ] Build exercise navigator
- [ ] Implement progress tracking
- [ ] Add self-mark completion
- [ ] Integrate AI verification
- [ ] Create completion summary

### Phase 5: Gamification
- [ ] Create XP calculation service
- [ ] Build streak tracking logic
- [ ] Implement level system
- [ ] Create XP/streak display components
- [ ] Build level progress bar

### Phase 6: Notifications
- [ ] Set up Resend integration
- [ ] Create email templates (React Email)
- [ ] Implement daily cron job
- [ ] Add streak warning logic

### Phase 7: Polish
- [ ] Settings view
- [ ] Profile view with history
- [ ] RTL support testing
- [ ] Responsive design testing
- [ ] Error handling & loading states

### Phase 8: Optional (Post-MVP)
- [ ] Notion integration
- [ ] Additional courses
- [ ] Achievement badges
- [ ] Leaderboard

---

## Reference Files

- **Database Schema**: `lib/appwrite/schema.ts`
- **TypeScript Types**: `lib/appwrite/types.ts`
- **Design Tokens**: `app/globals.css`
- **tRPC Setup**: `trpc/init.ts`
- **i18n Config**: `i18n/config.ts`
- **Auth Module**: `modules/auth/`
- **Dashboard Layout**: `shared/layout/`
- **Full System Plan**: `.claude/plans/wiggly-forging-pumpkin.md`
- "C:\Users\ilanc\Downloads\modernize-tailwind-nextjs-pro_NjhmM2FiODQ4NTU4M2UwMDM4OWRmY2I4\modernize-tailwind-nextjs-pro\modernize-tailwind-nextjs-pro-main\packages\main" this is the path  remmber it now that you know where is it i wnat you to create a new page for the development proccess, i want you to copy compoenents from there and design new compoents made for our app, from courses to the ai and so on so we  can visualize the design before creating the working ones
- remmber to put math in the math block component